# Check default config in case of breaking changes
# https://github.com/hyprwm/Hyprland/blob/main/example/hyprland.conf

# TODO: Maybe split to multible files because this thing is massive...

################
### DEFAULTS ###
################

# Font
$font = Adwaita Mono
# Mouse
$cursor = Bibata-Modern-Classic
$cursor_size = 24
$mouse = glorious-model-o
# Mouse buttons
$mouse_down = mouse:275
$mouse_left = mouse:272
$mouse_middle = mouse:274
$mouse_right = mouse:273
$mouse_up = mouse:276
# Apps
$browser = firefox
$colorpicker = ~/.config/hypr/scripts/colorpicker
$editor = foot -T nvim -e nvim
$filemanager = thunar
$gaps = ~/.config/hypr/scripts/toggle-gaps.sh
$htop = foot -T htop -a htop -e htop
$locker = hyprlock
$mail = thunderbird
$pacseek = foot -a pacseek -T pacseek -e pacseek
$terminal = footclient
$tuifm = foot -T lf -e lf
$updater = foot -T pop-upgrade -a floatterm -e popupgrade
$wallpaper = swayimg -g ~/Pictures/wallpaper/
$weather = ~/.local/bin/weatherfetch -n
$notes = foot -a noteterm -T Notes -e nvim -p ~/Documents/personal/notes/index.md
$todo = foot -a noteterm -T Todo -e nvim -p ~/Documents/personal/notes/todo.md
# Fuzzel menus
$dmenu = fuzzel
$clip = ~/.local/bin/menu_scripts/fuzzel_clipboard
$emojimenu = ~/.local/bin/menu_scripts/fuzzel_emoji
$killer = ~/.local/bin/menu_scripts/fuzzel_killer
$pass = ~/.local/bin/menu_scripts/fuzzel_passmenu
$pmenu = ~/.local/bin/menu_scripts/fuzzel_power
$screenshot = ~/.local/bin/menu_scripts/fuzzel_screenshot
$search = ~/.local/bin/menu_scripts/fuzzel_search
$sound = ~/.local/bin/menu_scripts/fuzzel_sound
$winlist = ~/.local/bin/menu_scripts/fuzzel_hypr_window
# Submaps
$submapreset = hyprctl dispatch submap reset &&
$subapp = 󱓞  (D)iscord (F)firefox (S)Steam (T)hunderbird) (A)ll
$subinfo = 󰰅 (I)nfo (C)pu (M)em (W)eather
$subpower = 󰐥 (L)ock (E)xit (R)eboot (S)hutdown (Z)zz
$subnotes = 󰈔 (N)notes (T)odos
$subshot = 󰄄 (F)ullscreen (R)egion (D)elay
$subrec = 󱖏 (F)Screen (A)+audio (R)egion (S)top
#################
### AUTOSTART ###
#################

exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = ~/.config/hypr/waybar/waybar.sh start
exec-once = hypridle
exec-once = foot --server
exec-once = swww-daemon
exec-once = hyprctl setcursor $cursor $cursor_size
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = sleep 6 && transmission-gtk

#############################
### ENVIRONMENT VARIABLES ###
#############################

env = ELECTRON_OZONE_PLATFORM_HINT,wayland
env = HYPRCURSOR_SIZE,$cursor_size
env = HYPRCURSOR_THEME,$cursor
env = MOZ_ENABLE_WAYLAND,1
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = XCURSOR_SIZE,$cursor_size
env = XCURSOR_THEME,$cursor
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland

#####################
### LOOK AND FEEL ###
#####################

# Colors
source= ~/.config/hypr/colors.conf

general {
    gaps_in = 4
    gaps_out = 4
    border_size = 2
    col.active_border = $col_cy
    col.inactive_border = $col_u1
    resize_on_border = false
    allow_tearing = false
    layout = master
}

decoration {
    rounding = 8
    rounding_power = 2
    active_opacity = 1.0
    inactive_opacity = 1.0
    dim_special = 0.2
    # By default shadows are enabled only with floating windows.
    # If you want shadows on tiled windows, remove the last line from this file.
    shadow {
        enabled = true
        range = 4
        render_power = 3
        color = rgba(000000ee)
    }
    blur {
        enabled = false
        size = 3
        passes = 1
        vibrancy = 0.1696
    }
}

animations {
    # Enable or disable animations
    enabled = false
    # Default curves, see https://wiki.hypr.land/Configuring/Animations/#curves
    #        NAME,           X0,   Y0,   X1,   Y1
    bezier = easeOutQuint,   0.23, 1,    0.32, 1
    bezier = easeInOutCubic, 0.65, 0.05, 0.36, 1
    bezier = linear,         0,    0,    1,    1
    bezier = almostLinear,   0.5,  0.5,  0.75, 1
    bezier = quick,          0.15, 0,    0.1,  1

    # Default animations, see https://wiki.hypr.land/Configuring/Animations/
    #           NAME,          ONOFF, SPEED, CURVE,        [STYLE]
    animation = global,        1,     10,    default
    animation = border,        0,     5.39,  easeOutQuint
    animation = windows,       1,     4.79,  easeOutQuint
    animation = windowsIn,     1,     4.1,   easeOutQuint, popin 87%
    animation = windowsOut,    1,     1.49,  linear,       popin 87%
    animation = fadeIn,        1,     1.73,  almostLinear
    animation = fadeOut,       1,     1.46,  almostLinear
    animation = fade,          1,     3.03,  quick
    animation = layers,        1,     3.81,  easeOutQuint
    animation = layersIn,      1,     4,     easeOutQuint, fade
    animation = layersOut,     1,     1.5,   linear,       fade
    animation = fadeLayersIn,  1,     1.79,  almostLinear
    animation = fadeLayersOut, 1,     1.39,  almostLinear
    animation = workspaces,    1,     1.94,  almostLinear, fade
    animation = workspacesIn,  1,     1.21,  almostLinear, fade
    animation = workspacesOut, 1,     1.94,  almostLinear, fade
    animation = zoomFactor,    1,     7,     quick
}

# Master layout
master {
    mfact = 0.55
    special_scale_factor=1
    new_on_top = false
    new_status = slave
}

# Sway-like window groups
group {
    col.border_active = $col_cy
    col.border_inactive = $col_u1
    col.border_locked_active = $col_pu
    col.border_locked_inactive = $col_u1
    groupbar {
    enabled = true
    font_size = 14
    gaps_in = 2
    gaps_out = 2
    gradient_round_only_edges = false
    gradient_rounding = 4
    gradients = true
    height = 20
    indicator_height = 0
    keep_upper_gap = false
    render_titles = true
    text_color = $col_bg
    text_color_inactive = $col_t1
    col.active = $col_cy
    col.inactive = $col_u1
    col.locked_active = $col_cy
    col.locked_inactive = $col_u1
    }
}

######################
### INPUT | OUTPUT ###
######################

# Universal rules for inputs
input {
    kb_layout = fi
    kb_options = caps:escape
    follow_mouse = 1
    touchpad {
    natural_scroll = false
    disable_while_typing = true
    clickfinger_behavior = true
    }
}

# Cursor
cursor {
	  inactive_timeout = 15
	  hide_on_key_press = false
}

# Settings for default mouse
device {
    name = $mouse
    accel_profile = flat
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}

# Monitors

# Auto default
monitor=,preferred,auto,auto
# HP E243m
# monitor = DP-1, 1920x1080@60, 0x0, 1

############
### MISC ###
############

misc {
    font_family = $font
    force_default_wallpaper = 0 # Set to 0 or 1 to disable the anime mascot wallpapers
    disable_hyprland_logo = true # If true disables the random hyprland logo / anime girl background. :(
}
ecosystem {
	  no_update_news = true
	  no_donation_nag = true
}
debug {
    disable_logs = true
    enable_stdout_logs = false
    overlay=false
}

########################
### KEYBINDINGS APPS ###
########################

bind = SUPER CONTROL, C, exec, $clip
bind = SUPER CONTROL, D, exec, fnottctl dismiss
bind = SUPER CONTROL, E, exec, $emojimenu
bind = SUPER CONTROL, F8, exec, ~/.local/bin/wl-record -k
bind = SUPER CONTROL, I, exec, $pacseek
bind = SUPER CONTROL, P, exec, $colorpicker
bind = SUPER CONTROL, S, exec, $sound
bind = SUPER CONTROL, U, exec, $updater
bind = SUPER SHIFT, Delete, exec, $htop
bind = SUPER SHIFT, E, exec, $filemanager
bind = SUPER SHIFT, F11, exec, ~/.config/hypr/scripts/hypridle-toggle.sh && pkill -SIGRTMIN+1 waybar
bind = SUPER SHIFT, F12, exec, ~/.config/hypr/scripts/hyprgamemode.sh
bind = SUPER SHIFT, P, exec, $pmenu
bind = SUPER SHIFT, Print, exec, ~/.local/bin/wl-shot -re
bind = SUPER SHIFT, W, exec, $wallpaper
bind = SUPER, B, exec, ~/.config/hypr/waybar/waybar.sh toggle
bind = SUPER, D, exec, $dmenu
bind = SUPER, E, exec, $tuifm
bind = SUPER, F1, exec, galculator
bind = SUPER, F11, exec, $locker
bind = SUPER, F12, exec, ~/.config/hypr/scripts/dot-settings.sh
bind = SUPER, F2, exec, signal-desktop
bind = SUPER, F3, exec, ~/.config/hypr/scripts/keybinds.sh
bind = SUPER, F4, exec, $killer
bind = SUPER, F5, exec, $pass
bind = SUPER, F6, submap, $subshot
bind = SUPER, F7, submap, $subrec
bind = SUPER, Prior, submap, $subapp
bind = SUPER, I, submap, $subinfo
bind = SUPER, M, exec, $mail
bind = SUPER, N, submap, $subnotes
bind = SUPER, P, submap, $subpower
bind = SUPER, Print, exec, ~/.local/bin/wl-shot -f
bind = SUPER, S, exec, $search
bind = SUPER, T, exec, ~/.local/bin/noti_date
bind = SUPER, TAB, exec, $winlist
bind = SUPER, V, exec, $editor
bind = SUPER, W, exec, $browser

###############
### SUBMAPS ###
###############
# App
submap = $subapp
bind = , D, exec, $submapreset discord
bind = , F, exec, $submapreset firefox
bind = , S, exec, $submapreset steam
bind = , T, exec, $submapreset thunderbird
bind = , A, exec, $submapreset discord & $browser & $mail & steam &
bind = , escape, submap, reset
submap = reset

# Info
submap = $subinfo
bind = , I, exec, $submapreset ~/.local/bin/noti_sysnfo
bind = , C, exec, $submapreset ~/.local/bin/noti_usage cpu
bind = , M, exec, $submapreset ~/.local/bin/noti_usage ram
bind = , W, exec, $submapreset $weather
bind = , escape, submap, reset
submap = reset

# Power
submap = $subpower
bind = , L, exec, $submapreset $locker
bind = , E, exec, $submapreset loginctl terminate-user "$USER"
bind = , R, exec, $submapreset systemctl reboot
bind = , S, exec, $submapreset systemctl poweroff
bind = , Z, exec, $submapreset systemctl suspend
bind = , escape, submap, reset
submap = reset

# Notes
submap = $subnotes
bind = , N, exec, $submapreset $notes
bind = , T, exec, $submapreset $todo
bind = , escape, submap, reset
submap = reset

# Screenshot
submap = $subshot
bind = , F, exec, $submapreset wl-shot -f
bind = , R, exec, $submapreset wl-shot -re
bind = , D, exec, $submapreset wl-shot -t
bind = , escape, submap, reset
submap = reset

# Record
submap = $subrec
bind = , F, exec, $submapreset wl-record -f
bind = , R, exec, $submapreset wl-record -r
bind = , A, exec, $submapreset wl-record -fs
bind = , S, exec, $submapreset wl-record -k
bind = , escape, submap, reset
submap = reset

########################
### KEYBINDINGS HYPR ###
########################

# Launch terminal
bind = SUPER, Return, exec, $terminal

# Kill active window
bind = SUPER, Q, killactive

# Groups
bind = SUPER, G, togglegroup
bind = SUPER ALT, H, changegroupactive, b
bind = SUPER ALT, L, changegroupactive, f
bind = SUPER ALT, left, changegroupactive, b
bind = SUPER ALT, right, changegroupactive, f

# Move focus with SUPER + arrow keys
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r
bind = SUPER, up, movefocus, u
bind = SUPER, down, movefocus, d

# Move focus with SUPER + vim keys
bind = SUPER, L, movefocus, l
bind = SUPER, H, movefocus, r
bind = SUPER, K, movefocus, u
bind = SUPER, J, movefocus, d

bind = SUPER SHIFT, H, swapwindow, l
bind = SUPER SHIFT, L, swapwindow, r
bind = SUPER SHIFT, K, swapwindow, u
bind = SUPER SHIFT, J, swapwindow, d

bind = SUPER SHIFT, left, swapwindow, l
bind = SUPER SHIFT, right, swapwindow, r
bind = SUPER SHIFT, up, swapwindow, u
bind = SUPER SHIFT, down, swapwindow, d

bind = SUPER CONTROL, H, resizeactive, -60 0
bind = SUPER CONTROL, J, resizeactive, 0 60
bind = SUPER CONTROL, K, resizeactive, 0 -60
bind = SUPER CONTROL, L, resizeactive, 60 0

bind = SUPER CONTROL, left, resizeactive, -60 0
bind = SUPER CONTROL, down, resizeactive, 0 60
bind = SUPER CONTROL, up, resizeactive, 0 -60
bind = SUPER CONTROL, right, resizeactive, 60 0

# Toggle floating
bind = SUPER, $mouse_down, togglefloating
bind = SUPER, Space, togglefloating

# Fullscreen toggle(s)
bind = SUPER, F ,fullscreen           # Entire screen
bind = SUPER SHIFT, F ,fullscreen, 1  # Maximize (keep gaps and bar)

# Smart gaps toggle
bind = SUPER CONTROL, G, exec, $gaps

# Promote window to master
bind = SUPER, Z, layoutmsg, swapwithmaster master

# Cycle between layout orientations (left,top,right,botton,center)
bind = SUPER, Insert, layoutmsg, orientationnext

# Pin window
bind = SUPER, Y, pin

# Add/remove master window
bind = SUPER, comma, layoutmsg, addmaster
bind = SUPER, period, layoutmsg, removemaster

# Switch workspaces with SUPER + [0-9]
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, focusurgentorlast

# Move active window to a workspace with SUPER + SHIFT + [0-9] (Use: "movetoworkspace" if you want to focus righ away)
bind = SUPER SHIFT, 1, movetoworkspacesilent, 1
bind = SUPER SHIFT, 2, movetoworkspacesilent, 2
bind = SUPER SHIFT, 3, movetoworkspacesilent, 3
bind = SUPER SHIFT, 4, movetoworkspacesilent, 4
bind = SUPER SHIFT, 5, movetoworkspacesilent, 5
bind = SUPER SHIFT, 6, movetoworkspacesilent, 6
bind = SUPER SHIFT, 7, movetoworkspacesilent, 7
bind = SUPER SHIFT, 8, movetoworkspacesilent, 8
bind = SUPER SHIFT, 9, movetoworkspacesilent, 9

# Example special workspace (scratchpad)
bind = SUPER, C, togglespecialworkspace, chat
bind = SUPER SHIFT, C, movetoworkspacesilent, special:chat
bind = SUPER, X, togglespecialworkspace, zen
bind = SUPER SHIFT, X, movetoworkspacesilent, special:zen

# Move/resize
bindm = SUPER, $mouse_left, movewindow
bindm = SUPER, $mouse_right, resizewindow

######################
### XF86 AND MEDIA ###
######################

bind = ,XF86AudioLowerVolume, exec, ~/.config/hypr/scripts/volume.sh down
bind = ,XF86AudioMicMute, exec, ~/.config/hypr/scripts/mic-toggle.sh
bind = ,XF86AudioMute, exec, ~/.config/hypr/scripts/volume.sh mute
bind = ,XF86AudioNext, exec, ~/.config/hypr/scripts/mediactrl.sh --nxt
bind = ,XF86AudioPlay, exec, ~/.config/hypr/scripts/mediactrl.sh --play
bind = ,XF86AudioPrev, exec, ~/.config/hypr/scripts/mediactrl.sh --prv
bind = ,XF86AudioRaiseVolume, exec, ~/.config/hypr/scripts/volume.sh up
bind = ,XF86AudioStop, exec, ~/.config/hypr/scripts/mediactrl.sh --stop
bind = ,XF86MonBrightnessDown, exec, ~/.config/hypr/scripts/brightness.sh down
bind = ,XF86MonBrightnessUp,  exec, ~/.config/hypr/scripts/brightness.sh up
bind = CONTROL SHIFT, down, exec, ~/.config/hypr/scripts/volume.sh down
bind = CONTROL SHIFT, up, exec, ~/.config/hypr/scripts/volume.sh up
bind = SUPER CONTROL, M, exec, ~/.config/hypr/scripts/mediactrl.sh --noti
bind = SUPER, F10, exec, ~/.config/hypr/scripts/mic-toggle.sh

#############
### RULES ###
#############

# Floaters
windowrulev2 = float, class:^()$, title:^(Save File)$
windowrulev2 = float, class:^()$, title:^(Steam - Self Updater)$
windowrulev2 = float, class:^(btrfs-assistant|GParted|blueman-manager|btrfs-assistant|org.pulseaudio.pavucontrol|nm-connection-editor)$
windowrulev2 = float, class:^(discord|vesktop)$
windowrulev2 = float, class:^(file-roller|galculator|gsimplecal|nwg-look|qt6ct|Yad|zenity)$
windowrulev2 = float, class:^(firefox)$, title:^(About)(.*)$
windowrulev2 = float, class:^(firefox)$, title:^(Library)$
windowrulev2 = float, class:^(htop)$, title:^(htop)$
windowrulev2 = float, class:^(pop-upgrade|floatterm|noteterm|pacseek)$
windowrulev2 = float, class:^(steam|net.lutris.Lutris|pcsx2-qt)$
windowrulev2 = float, class:^(swayimg|mpv|gimp|signal|org.pwmt.zathura)$
windowrulev2 = float, class:^(thunderbird)$, title:^(Edit Item)$
windowrulev2 = float, class:^(thunderbird)$, title:^(Write:)(.*)$
windowrulev2 = float, class:^(xdg-desktop-portal-gtk|xdg-desktop-portal-kde|xdg-desktop-portal-hyprland|polkit-gnome-authentication-agent-1)(.*)$
windowrulev2 = float, title:^(Confirm to replace files|Rename|Export Image as|File Operation Progress|File Upload|Open File|Open Folder|Safe As|Safe File as|Select File)(.*)$
# Sizes for some floaters
windowrulev2 = move 10% 4%, class:^(noteterm)$
windowrulev2 = move 20% 4%, class:^(fuzzypkg|pop-upgrade|floatterm|pacseek)$
windowrulev2 = size 40%, class:^(qt6ct)$
windowrulev2 = size 50%, class:^(htop)$, title:^(htop)$
windowrulev2 = size 60%, class:^(fuzzypkg|pop-upgrade|floatterm|pacseek)$
windowrulev2 = size 80%, class:^(noteterm|swayimg)$
windowrulev2 = size 70% 70%, class:^(discord)$

# Firefox Picture in picture
windowrulev2 = float, class:^(firefox)$, title:^(Picture-in-Picture)$
windowrulev2 = move 69% 4%, class:^(firefox)$, title:^(Picture-in-Picture)$
windowrulev2 = pin, class:^(firefox)$, title:^(Picture-in-Picture)$
windowrulev2 = size 30%, class:^(firefox)$, title:^(Picture-in-Picture)$

# No fancy stuff for steam please
windowrulev2 = noborder, class:^(steam)$
windowrulev2 = norounding, class:^(steam)$
windowrulev2 = noshadow, class:^(steam)$

# Applications to workspaces with window rules (remove "silent" if you want to focus right away)
windowrulev2 = workspace 2 silent, class:^(firefox)$
windowrulev2 = workspace 3 silent, class:^(thunderbird)$
windowrulev2 = workspace 4 silent, class:^(com.transmissionbt.transmission_)(.*)$
windowrulev2 = workspace 5 silent, class:^(pcsx2-qt|steam|net.lutris.Lutris)$
windowrulev2 = workspace special:chat silent, class:^(vesktop|discord)$

# Layer rules
layerrule = noanim, gtk4-layer-shell
layerrule = noanim, hyprpicker
layerrule = noanim, launcher
layerrule = noanim, notifications
layerrule = noanim, swww-daemon
layerrule = noanim, waybar

# Ignore maximize requests from apps. You'll probably like this.
windowrulev2 = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# Special workspace = special color :p
windowrulev2 = bordercolor $col_pu, onworkspace:s[1]

# Fullscreen.1 border color
windowrulev2 = bordercolor $col_pu,fullscreen:1

# Only floating windows has shadows
windowrulev2 = noshadow, floating:0
