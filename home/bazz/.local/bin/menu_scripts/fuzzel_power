#!/usr/bin/env bash
# https://github.com/bitterhalt
set -euo pipefail

CONFIRM="fuzzel -d -a top-right --minimal-lines --x 4 --y 4 -w 10 -p Sure? "

confirm_action() {
  [[ "$(echo -e "Yes\nNo" | $CONFIRM)" == "Yes" ]]
}

case "$(printf "%s\n" "Lock" "Logout" "Suspend" "Reboot" "Reboot to UEFI" "Shutdown" | fuzzel -d -a top-right --x 4 --y 4 -w 14 --minimal-lines --hide-prompt)" in
"Shutdown")
  if confirm_action; then
    systemctl poweroff
  fi
  ;;
"Reboot")
  if confirm_action; then
    systemctl reboot
  fi
  ;;
"Reboot to UEFI")
  if confirm_action; then
    systemctl reboot --firmware-setup
  fi
  ;;
"Suspend")
  systemctl suspend
  ;;
"Lock")
  hyprlock
  ;;
"Logout")
  loginctl terminate-user "$USER"
  ;;
esac
