#!/usr/bin/env bash
# https://github.com/bitterhalt
set -euo pipefail

CONFIRM="fuzzel -d -a top-right --x 4 --y 4 -w 10 -l2 -p Sure? "

confirm_action() {
  [[ "$(echo -e "Yes\nNo" | $CONFIRM)" == "Yes" ]]
}

case "$(printf "%s\n" "Lock" "Logout" "Suspend" "Reboot" "Shutdown" | fuzzel -d -a top-right --x 4 --y 4 -l5 -w 10 --hide-prompt)" in
"Shutdown")
  if confirm_action; then
    systemctl poweroff
  fi
  ;;
"Reboot")
  if confirm_action; then
    systemctl reboot
  fi
  ;;
"Suspend")
  systemctl suspend
  ;;
"Lock")
  swaylock -f
  ;;
"Logout")
  loginctl terminate-user "$USER"
  ;;
esac
